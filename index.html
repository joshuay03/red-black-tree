<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.36
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-RedBlackTree">RedBlackTree</h1>

<p><img src="https://img.shields.io/gem/v/red-black-tree"> <img src="https://img.shields.io/github/actions/workflow/status/joshuay03/red-black-tree/.github/workflows/tests.yml?branch=main"></p>

<p><a href="https://en.wikipedia.org/wiki/Red%E2%80%93black_tree">Red-black tree</a> data structure for Ruby.</p>

<h2 id="label-Installation">Installation</h2>

<p>Install the gem and add to the application’s Gemfile by executing:</p>

<pre class="code ruby"><code class="ruby">$ bundle add red-black-tree
</code></pre>

<p>If bundler is not being used to manage dependencies, install the gem by executing:</p>

<pre class="code ruby"><code class="ruby">$ gem install red-black-tree
</code></pre>

<h2 id="label-Usage">Usage</h2>

<pre class="code ruby"><code class="ruby"><span class='const'>Work</span> <span class='op'>=</span> <span class='const'>Struct</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='symbol'>:min_latency</span><span class='comma'>,</span> <span class='label'>keyword_init:</span> <span class='kw'>true</span>

<span class='comment'># Needs to be implemented by you
</span><span class='kw'>class</span> <span class='const'>WorkNode</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="RedBlackTree.html" title="RedBlackTree (class)">RedBlackTree</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="RedBlackTree/Node.html" title="RedBlackTree::Node (class)">Node</a></span></span>
  <span class='kw'>def</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_tree'>tree</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="RedBlackTree.html" title="RedBlackTree (class)">RedBlackTree</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="RedBlackTree.html#initialize-instance_method" title="RedBlackTree#initialize (method)">new</a></span></span>

<span class='id identifier rubyid_tree'>tree</span> <span class='op'>&lt;&lt;</span> <span class='const'>WorkNode</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Work</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>min_latency:</span> <span class='float'>0.8</span><span class='rparen'>)</span>
<span class='id identifier rubyid_tree'>tree</span> <span class='op'>&lt;&lt;</span> <span class='const'>WorkNode</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Work</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>min_latency:</span> <span class='float'>1.2</span><span class='rparen'>)</span>
<span class='id identifier rubyid_tree'>tree</span> <span class='op'>&lt;&lt;</span> <span class='const'>WorkNode</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Work</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>min_latency:</span> <span class='float'>0.8</span><span class='rparen'>)</span>
<span class='id identifier rubyid_tree'>tree</span> <span class='op'>&lt;&lt;</span> <span class='const'>WorkNode</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Work</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>min_latency:</span> <span class='float'>0.4</span><span class='rparen'>)</span>

<span class='kw'>until</span> <span class='id identifier rubyid_tree'>tree</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_work'>work</span> <span class='op'>=</span> <span class='id identifier rubyid_tree'>tree</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='comment'># 0.4, 0.8, 0.8, 1.2
</span>  <span class='comment'># process work
</span><span class='kw'>end</span>
</code></pre>

<h2 id="label-Performance">Performance</h2>

<blockquote>
<p>[!NOTE] Red-black trees are designed for specific use cases and are not intended as a general-purpose data structure. The comparisons below are provided merely to illustrate the performance characteristics of the gem. However, it is important to note that the benchmarks do not take into account the self-balancing nature of red-black trees.</p>
</blockquote>

<h3 id="label-Sort+and+iterate+10-2C000+elements">Sort and iterate 10,000 elements</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>benchmark/ips</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Work</span> <span class='op'>=</span> <span class='const'>Struct</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='symbol'>:min_latency</span><span class='comma'>,</span> <span class='label'>keyword_init:</span> <span class='kw'>true</span>

<span class='kw'>class</span> <span class='const'>WorkNode</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="RedBlackTree.html" title="RedBlackTree (class)">RedBlackTree</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="RedBlackTree/Node.html" title="RedBlackTree::Node (class)">Node</a></span></span>
  <span class='kw'>def</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_sample_data'>sample_data</span> <span class='op'>=</span> <span class='int'>10_000</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='const'>Work</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>min_latency:</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>1_000</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

<span class='const'>Benchmark</span><span class='period'>.</span><span class='id identifier rubyid_ips'>ips</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
  <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_report'>report</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RedBlackTree</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tree'>tree</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="RedBlackTree.html" title="RedBlackTree (class)">RedBlackTree</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="RedBlackTree.html#initialize-instance_method" title="RedBlackTree#initialize (method)">new</a></span></span>
    <span class='id identifier rubyid_sample_data'>sample_data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_tree'>tree</span> <span class='op'>&lt;&lt;</span> <span class='const'>WorkNode</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_work'>work</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_tree'>tree</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='kw'>until</span> <span class='id identifier rubyid_tree'>tree</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>end</span>

  <span class='comment'># 1:1 comparison
</span>  <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_report'>report</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Array (gradual sort)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_sample_data'>sample_data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_array'>array</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_work'>work</span><span class='semicolon'>;</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:min_latency</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='kw'>until</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_report'>report</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Array (single sort)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_sample_data'>sample_data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_array'>array</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_work'>work</span><span class='semicolon'>;</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:min_latency</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='kw'>until</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_compare!'>compare!</span>
<span class='kw'>end</span>

<span class='comment'>#=&gt; ruby 3.4.1 (2024-12-25 revision 48d4efcb85) +YJIT +PRISM [arm64-darwin24]
</span><span class='comment'>#=&gt; Warming up --------------------------------------
</span><span class='comment'>#=&gt;         RedBlackTree     1.000 i/100ms
</span><span class='comment'>#=&gt; Array (gradual sort)     1.000 i/100ms
</span><span class='comment'>#=&gt;  Array (single sort)   100.000 i/100ms
</span><span class='comment'>#=&gt; Calculating -------------------------------------
</span><span class='comment'>#=&gt;         RedBlackTree     16.684 (± 6.0%) i/s   (59.94 ms/i) -     84.000 in   5.053688s
</span><span class='comment'>#=&gt; Array (gradual sort)      0.270 (± 0.0%) i/s     (3.71 s/i) -      2.000 in   7.418650s
</span><span class='comment'>#=&gt;  Array (single sort)     1.006k (± 2.4%) i/s  (994.28 μs/i) -      5.100k in   5.073834s
</span><span class='comment'>#=&gt;
</span><span class='comment'>#=&gt; Comparison:
</span><span class='comment'>#=&gt;  Array (single sort):     1005.8 i/s
</span><span class='comment'>#=&gt;         RedBlackTree:       16.7 i/s - 60.28x  slower
</span><span class='comment'>#=&gt; Array (gradual sort):        0.3 i/s - 3729.44x  slower
</span></code></pre>

<h3 id="label-Sort+and+search+10-2C000+elements">Sort and search 10,000 elements</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>benchmark/ips</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>Work</span> <span class='op'>=</span> <span class='const'>Struct</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='symbol'>:min_latency</span><span class='comma'>,</span> <span class='label'>keyword_init:</span> <span class='kw'>true</span>

<span class='kw'>class</span> <span class='const'>WorkNode</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="RedBlackTree.html" title="RedBlackTree (class)">RedBlackTree</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="RedBlackTree/Node.html" title="RedBlackTree::Node (class)">Node</a></span></span>
  <span class='kw'>def</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_sample_data'>sample_data</span> <span class='op'>=</span> <span class='int'>10_000</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='const'>Work</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>min_latency:</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>1_000</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_search_sample'>search_sample</span> <span class='op'>=</span> <span class='id identifier rubyid_sample_data'>sample_data</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>

<span class='const'>Benchmark</span><span class='period'>.</span><span class='id identifier rubyid_ips'>ips</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
  <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_report'>report</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RedBlackTree#search</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tree'>tree</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="RedBlackTree.html" title="RedBlackTree (class)">RedBlackTree</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="RedBlackTree.html#initialize-instance_method" title="RedBlackTree#initialize (method)">new</a></span></span>
    <span class='id identifier rubyid_sample_data'>sample_data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_tree'>tree</span> <span class='op'>&lt;&lt;</span> <span class='const'>WorkNode</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_work'>work</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>unless</span> <span class='id identifier rubyid_tree'>tree</span><span class='period'>.</span><span class='id identifier rubyid_search'>search</span> <span class='id identifier rubyid_search_sample'>search_sample</span>
  <span class='kw'>end</span>

  <span class='comment'># 1:1 comparison
</span>  <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_report'>report</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Array#find (gradual sort)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_sample_data'>sample_data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_array'>array</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_work'>work</span><span class='semicolon'>;</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:min_latency</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>unless</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_work'>work</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='op'>==</span> <span class='id identifier rubyid_search_sample'>search_sample</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_report'>report</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Array#find (single sort)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_sample_data'>sample_data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_array'>array</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_work'>work</span><span class='semicolon'>;</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:min_latency</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>unless</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_work'>work</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='op'>==</span> <span class='id identifier rubyid_search_sample'>search_sample</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='comment'># 1:1 comparison
</span>  <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_report'>report</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Array#bsearch (gradual sort)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_sample_data'>sample_data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_array'>array</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_work'>work</span><span class='semicolon'>;</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:min_latency</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>unless</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_bsearch'>bsearch</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_search_sample'>search_sample</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_work'>work</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_report'>report</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Array#bsearch (single sort)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_sample_data'>sample_data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_array'>array</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_work'>work</span><span class='semicolon'>;</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_sort_by!'>sort_by!</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:min_latency</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='kw'>unless</span> <span class='id identifier rubyid_array'>array</span><span class='period'>.</span><span class='id identifier rubyid_bsearch'>bsearch</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_work'>work</span><span class='op'>|</span> <span class='id identifier rubyid_search_sample'>search_sample</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_work'>work</span><span class='period'>.</span><span class='id identifier rubyid_min_latency'>min_latency</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_compare!'>compare!</span>
<span class='kw'>end</span>

<span class='comment'>#=&gt; ruby 3.4.1 (2024-12-25 revision 48d4efcb85) +YJIT +PRISM [arm64-darwin24]
</span><span class='comment'>#=&gt; Warming up --------------------------------------
</span><span class='comment'>#=&gt;  RedBlackTree#search     3.000 i/100ms
</span><span class='comment'>#=&gt; Array#find (gradual sort)
</span><span class='comment'>#=&gt;                          1.000 i/100ms
</span><span class='comment'>#=&gt; Array#find (single sort)
</span><span class='comment'>#=&gt;                         95.000 i/100ms
</span><span class='comment'>#=&gt; Array#bsearch (gradual sort)
</span><span class='comment'>#=&gt;                          1.000 i/100ms
</span><span class='comment'>#=&gt; Array#bsearch (single sort)
</span><span class='comment'>#=&gt;                        108.000 i/100ms
</span><span class='comment'>#=&gt; Calculating -------------------------------------
</span><span class='comment'>#=&gt;  RedBlackTree#search     42.850 (± 4.7%) i/s   (23.34 ms/i) -    216.000 in   5.049896s
</span><span class='comment'>#=&gt; Array#find (gradual sort)
</span><span class='comment'>#=&gt;                           0.274 (± 0.0%) i/s     (3.65 s/i) -      2.000 in   7.302412s
</span><span class='comment'>#=&gt; Array#find (single sort)
</span><span class='comment'>#=&gt;                         935.492 (± 2.7%) i/s    (1.07 ms/i) -      4.750k in   5.081415s
</span><span class='comment'>#=&gt; Array#bsearch (gradual sort)
</span><span class='comment'>#=&gt;                           0.275 (± 0.0%) i/s     (3.63 s/i) -      2.000 in   7.269027s
</span><span class='comment'>#=&gt; Array#bsearch (single sort)
</span><span class='comment'>#=&gt;                          1.104k (± 2.0%) i/s  (905.52 μs/i) -      5.616k in   5.087395s
</span><span class='comment'>#=&gt;
</span><span class='comment'>#=&gt; Comparison:
</span><span class='comment'>#=&gt;  Array#bsearch (single sort):     1104.3 i/s
</span><span class='comment'>#=&gt;     Array#find (single sort):      935.5 i/s - 1.18x  slower
</span><span class='comment'>#=&gt;          RedBlackTree#search:       42.9 i/s - 25.77x  slower
</span><span class='comment'>#=&gt; Array#bsearch (gradual sort):        0.3 i/s - 4013.67x  slower
</span><span class='comment'>#=&gt;    Array#find (gradual sort):        0.3 i/s - 4031.85x  slower
</span></code></pre>

<h2 id="label-WIP+Features">WIP Features</h2>
<ul><li>
<p><code>RedBlackTree#max</code></p>
</li><li>
<p><code>RedBlackTree#height</code></p>
</li></ul>

<h2 id="label-Development">Development</h2>

<p>After checking out the repo, run <code>bin/setup</code> to install dependencies. Then, run <code>bundle exec rake test</code> to run the tests. You can also run <code>bin/console</code> for an interactive prompt that will allow you to experiment.</p>

<h2 id="label-Contributing">Contributing</h2>

<p>Bug reports and pull requests are welcome on GitHub at <a href="https://github.com/joshuay03/red-black-tree">github.com/joshuay03/red-black-tree</a>.</p>

<h2 id="label-License">License</h2>

<p>The gem is available as open source under the terms of the <a href="https://opensource.org/licenses/MIT">MIT License</a>.</p>

<h2 id="label-Code+of+Conduct">Code of Conduct</h2>

<p>Everyone interacting in the RedBlackTree project’s codebases, issue trackers, chat rooms and mailing lists is expected to follow the <a href="https://github.com/joshuay03/red-black-tree/blob/main/CODE_OF_CONDUCT.md">code of conduct</a>.</p>
</div></div>

      <div id="footer">
  Generated on Tue Sep 30 11:39:28 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.36 (ruby-3.4.6).
</div>

    </div>
  </body>
</html>